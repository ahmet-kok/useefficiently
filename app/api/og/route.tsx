import { ImageResponse } from "next/og";
import {
  SiAirtable as AirtableIcon,
  SiMake as MakeIcon,
  SiZapier as ZapierIcon,
} from "react-icons/si";
export async function GET(request: Request) {
  try {
    const { searchParams } = new URL(request.url);
    const hasTitle = searchParams.has("title");
    const title = hasTitle
      ? searchParams.get("title")?.slice(0, 100)
      : "UseEfficiently\nAirtable Services Partner";

    return new ImageResponse(
      (
        <div
          className="bg-zinc-900"
          style={{
            color: "#f5f3ff",

            backgroundColor: "#18181b",
            backgroundSize: "150px 150px",
            height: "100%",
            width: "100%",
            display: "flex",
            textAlign: "center",
            alignItems: "center",
            justifyContent: "space-around",
            flexDirection: "column",
            flexWrap: "nowrap",
            fontSize: 80,
            marginBottom: 150,
            padding: "0 20px",
            whiteSpace: "pre-wrap",
          }}
        >
          <div
            style={{
              display: "flex",
              textAlign: "center",
              alignItems: "center",
              flexDirection: "column",
              fontSize: 80,
              whiteSpace: "pre-wrap",
            }}
          >
            <svg
              style={{
                display: "block",
                margin: "auto",
                width: "200px",
                height: "200px",
              }}
              xmlns="http://www.w3.org/2000/svg"
              zoomAndPan="magnify"
              viewBox="0 0 810 809.999993"
              preserveAspectRatio="xMidYMid meet"
              version="1.0"
            >
              <defs>
                <clipPath id="01adb600d3">
                  <path
                    d="M 12.335938 12.335938 L 797.585938 12.335938 L 797.585938 797.585938 L 12.335938 797.585938 Z M 12.335938 12.335938 "
                    clip-rule="nonzero"
                  />
                </clipPath>
              </defs>
              <path
                fill="#a78bfa"
                d="M 404.984375 361.050781 C 380.75 361.050781 361.050781 380.769531 361.050781 404.980469 C 361.050781 429.199219 380.75 448.917969 404.984375 448.917969 C 429.207031 448.917969 448.902344 429.199219 448.902344 404.980469 C 448.902344 380.769531 429.207031 361.050781 404.984375 361.050781 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <path
                fill="#a78bfa"
                d="M 369.785156 360.582031 C 377.878906 354.148438 387.6875 349.949219 398.488281 348.707031 L 398.488281 205.726562 C 348.375 207.347656 302.953125 227.460938 268.730469 259.554688 L 369.785156 360.582031 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <path
                fill="#a78bfa"
                d="M 411.488281 205.726562 L 411.488281 348.707031 C 422.273438 349.964844 432.085938 354.148438 440.171875 360.582031 L 541.230469 259.542969 C 507.007812 227.460938 461.589844 207.359375 411.488281 205.726562 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <path
                fill="#a78bfa"
                d="M 461.238281 411.476562 C 460 422.269531 455.804688 432.074219 449.378906 440.175781 L 550.421875 541.21875 C 582.503906 507.003906 602.617188 461.582031 604.234375 411.476562 L 461.238281 411.476562 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <path
                fill="#a78bfa"
                d="M 348.71875 398.480469 C 349.96875 387.691406 354.160156 377.878906 360.597656 369.785156 L 259.535156 268.742188 C 227.464844 302.96875 207.355469 348.375 205.726562 398.480469 L 348.71875 398.480469 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <path
                fill="#a78bfa"
                d="M 348.71875 411.476562 L 205.726562 411.476562 C 207.355469 461.578125 227.464844 506.992188 259.542969 541.214844 L 360.597656 440.171875 C 354.160156 432.074219 349.96875 422.269531 348.71875 411.476562 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <g clip-path="url(#01adb600d3)">
                <path
                  fill="#a78bfa"
                  d="M 743.421875 436.96875 L 683.707031 436.96875 C 677.804688 489.1875 657.472656 538.214844 624.683594 579.4375 L 666.917969 621.652344 C 679.410156 634.152344 679.410156 654.441406 666.917969 666.90625 C 654.445312 679.375 634.144531 679.375 621.660156 666.90625 L 579.417969 624.671875 C 538.207031 657.464844 489.1875 677.78125 436.972656 683.699219 L 436.972656 743.414062 C 436.972656 761.042969 422.625 775.398438 404.984375 775.398438 C 387.347656 775.398438 372.988281 761.042969 372.988281 743.414062 L 372.988281 683.71875 C 320.765625 677.792969 271.757812 657.464844 230.519531 624.671875 L 188.285156 666.90625 C 182.273438 672.9375 174.230469 676.25 165.664062 676.25 C 157.101562 676.25 149.0625 672.9375 143.050781 666.90625 C 130.589844 654.441406 130.589844 634.152344 143.050781 621.652344 L 185.273438 579.4375 C 152.492188 538.214844 132.191406 489.1875 126.257812 436.96875 L 66.554688 436.96875 C 48.898438 436.96875 34.566406 422.617188 34.566406 404.980469 C 34.566406 387.339844 48.898438 373 66.554688 373 L 126.257812 373 C 132.179688 320.765625 152.480469 271.738281 185.273438 230.515625 L 143.050781 188.292969 C 137.03125 182.273438 133.71875 174.242188 133.71875 165.671875 C 133.71875 157.105469 137.03125 149.074219 143.050781 143.054688 C 155.535156 130.582031 175.820312 130.582031 188.285156 143.054688 L 230.519531 185.28125 C 271.757812 152.492188 320.785156 132.191406 372.988281 126.257812 L 372.988281 66.535156 C 372.988281 48.914062 387.347656 34.558594 404.984375 34.558594 C 422.625 34.558594 436.972656 48.914062 436.972656 66.535156 L 436.972656 126.257812 C 489.199219 132.179688 538.207031 152.492188 579.449219 185.265625 L 621.660156 143.054688 C 627.691406 137.023438 635.734375 133.707031 644.285156 133.707031 C 652.859375 133.707031 660.890625 137.023438 666.917969 143.054688 C 679.410156 155.515625 679.410156 175.820312 666.917969 188.292969 L 624.683594 230.515625 C 657.472656 271.738281 677.804688 320.765625 683.707031 373 L 743.421875 373 C 761.058594 373 775.429688 387.339844 775.429688 404.980469 C 775.429688 422.617188 761.058594 436.96875 743.421875 436.96875 Z M 743.421875 350.773438 L 702.890625 350.773438 C 695.234375 308.378906 678.570312 268.167969 653.957031 232.667969 L 682.621094 204.003906 C 692.878906 193.777344 698.511719 180.144531 698.511719 165.660156 C 698.511719 151.160156 692.867188 137.546875 682.621094 127.324219 C 672.40625 117.109375 658.789062 111.496094 644.285156 111.496094 C 629.789062 111.496094 616.175781 117.109375 605.941406 127.324219 L 577.289062 155.996094 C 541.796875 131.394531 501.574219 114.742188 459.203125 107.074219 L 459.203125 66.554688 C 459.203125 36.65625 434.875 12.332031 404.984375 12.332031 C 375.085938 12.332031 350.761719 36.65625 350.761719 66.554688 L 350.761719 107.074219 C 308.371094 114.742188 268.15625 131.40625 232.679688 156.007812 L 204 127.324219 C 193.777344 117.109375 180.164062 111.464844 165.675781 111.464844 C 151.191406 111.464844 137.578125 117.109375 127.320312 127.355469 C 117.117188 137.570312 111.496094 151.191406 111.496094 165.671875 C 111.496094 180.199219 117.128906 193.800781 127.335938 203.992188 L 155.996094 232.667969 C 131.40625 268.136719 114.742188 308.367188 107.074219 350.773438 L 66.554688 350.773438 C 36.664062 350.773438 12.335938 375.082031 12.335938 404.980469 C 12.335938 434.875 36.664062 459.183594 66.554688 459.183594 L 107.078125 459.183594 C 114.753906 501.597656 131.417969 541.808594 156 577.277344 L 127.324219 605.953125 C 106.207031 627.109375 106.214844 661.503906 127.320312 682.601562 C 137.535156 692.835938 151.148438 698.472656 165.664062 698.472656 C 180.199219 698.472656 193.820312 692.835938 204 682.621094 L 232.679688 653.949219 C 268.15625 678.550781 308.371094 695.222656 350.761719 702.902344 L 350.761719 743.421875 C 350.761719 773.3125 375.085938 797.625 404.984375 797.625 C 434.875 797.625 459.203125 773.3125 459.203125 743.421875 L 459.203125 702.890625 C 501.597656 695.203125 541.828125 678.535156 577.265625 653.949219 L 605.960938 682.632812 C 616.1875 692.847656 629.808594 698.472656 644.285156 698.472656 C 658.789062 698.472656 672.40625 692.847656 682.621094 682.632812 C 692.867188 672.417969 698.511719 658.816406 698.511719 644.3125 C 698.523438 629.8125 692.878906 616.1875 682.632812 605.941406 L 653.96875 577.277344 C 678.570312 541.796875 695.234375 501.566406 702.890625 459.183594 L 743.421875 459.183594 C 773.332031 459.183594 797.65625 434.875 797.65625 404.980469 C 797.65625 375.082031 773.332031 350.773438 743.421875 350.773438 "
                  fill-opacity="1"
                  fill-rule="nonzero"
                />
              </g>
              <path
                fill="#a78bfa"
                d="M 555.632812 554.761719 C 555.503906 554.925781 555.441406 555.128906 555.28125 555.28125 C 555.140625 555.441406 554.9375 555.496094 554.761719 555.632812 C 516.296875 593.867188 463.367188 617.542969 404.984375 617.542969 C 346.601562 617.542969 293.671875 593.871094 255.214844 555.648438 C 255.039062 555.507812 254.816406 555.449219 254.65625 555.28125 C 254.492188 555.121094 254.4375 554.902344 254.289062 554.730469 C 216.078125 516.273438 192.402344 463.34375 192.402344 404.980469 C 192.402344 346.605469 216.078125 293.679688 254.289062 255.214844 C 254.4375 255.039062 254.492188 254.835938 254.65625 254.664062 C 254.816406 254.503906 255.03125 254.449219 255.199219 254.320312 C 293.660156 216.074219 346.59375 192.402344 404.984375 192.402344 C 463.367188 192.402344 516.328125 216.085938 554.789062 254.332031 C 554.949219 254.460938 555.140625 254.523438 555.28125 254.664062 C 555.441406 254.824219 555.503906 255.027344 555.632812 255.183594 C 593.871094 293.648438 617.5625 346.59375 617.5625 404.980469 C 617.5625 463.367188 593.871094 516.304688 555.632812 554.761719 Z M 743.421875 385.996094 L 677.859375 385.996094 C 674.503906 385.996094 671.679688 383.417969 671.363281 380.09375 C 666.386719 326.316406 645.507812 275.878906 610.933594 234.203125 C 608.792969 231.644531 608.984375 227.851562 611.339844 225.476562 L 657.730469 179.089844 C 665.109375 171.695312 665.109375 159.652344 657.730469 152.246094 C 654.160156 148.667969 649.386719 146.707031 644.285156 146.707031 C 639.195312 146.707031 634.433594 148.667969 630.84375 152.246094 L 584.484375 198.605469 C 582.125 200.992188 578.332031 201.167969 575.742188 199.011719 C 534.097656 164.445312 483.640625 143.535156 429.886719 138.582031 C 426.53125 138.28125 423.96875 135.472656 423.96875 132.117188 L 423.96875 66.535156 C 423.96875 56.0625 415.445312 47.554688 404.984375 47.554688 C 394.503906 47.554688 385.984375 56.0625 385.984375 66.535156 L 385.984375 132.128906 C 385.984375 135.492188 383.425781 138.296875 380.074219 138.601562 C 326.304688 143.566406 275.886719 164.457031 234.21875 199.027344 C 231.644531 201.167969 227.851562 200.992188 225.496094 198.625 L 179.101562 152.246094 C 171.691406 144.824219 159.640625 144.824219 152.246094 152.246094 C 144.828125 159.652344 144.828125 171.695312 152.246094 179.089844 L 198.617188 225.476562 C 200.996094 227.851562 201.164062 231.644531 199.015625 234.234375 C 164.445312 275.878906 143.546875 326.316406 138.589844 380.09375 C 138.28125 383.417969 135.472656 385.976562 132.109375 385.976562 L 66.554688 385.976562 C 56.070312 385.976562 47.566406 394.503906 47.566406 404.980469 C 47.566406 415.457031 56.070312 423.972656 66.554688 423.972656 L 132.128906 423.972656 C 135.496094 423.972656 138.308594 426.519531 138.609375 429.871094 C 143.566406 483.640625 164.460938 534.089844 199.015625 575.722656 C 201.164062 578.320312 200.984375 582.105469 198.617188 584.472656 L 152.246094 630.84375 C 148.675781 634.414062 146.707031 639.195312 146.707031 644.285156 C 146.707031 649.371094 148.675781 654.144531 152.246094 657.722656 C 155.800781 661.289062 160.566406 663.257812 165.664062 663.257812 C 170.761719 663.257812 175.53125 661.289062 179.101562 657.722656 L 225.496094 611.332031 C 226.742188 610.070312 228.417969 609.4375 230.074219 609.4375 C 231.546875 609.4375 233.019531 609.933594 234.234375 610.929688 C 275.886719 645.5 326.304688 666.417969 380.074219 671.375 C 383.425781 671.679688 385.984375 674.484375 385.984375 677.839844 L 385.984375 743.414062 C 385.984375 753.875 394.503906 762.398438 404.984375 762.398438 C 415.445312 762.398438 423.96875 753.875 423.96875 743.414062 L 423.96875 677.828125 C 423.96875 674.480469 426.53125 671.664062 429.886719 671.355469 C 483.640625 666.398438 534.070312 645.5 575.742188 610.929688 C 578.308594 608.78125 582.113281 608.972656 584.46875 611.332031 L 630.84375 657.722656 C 638.269531 665.117188 650.3125 665.117188 657.730469 657.722656 C 665.109375 650.304688 665.109375 638.269531 657.730469 630.84375 L 611.339844 584.472656 C 608.984375 582.105469 608.792969 578.320312 610.933594 575.722656 C 645.507812 534.089844 666.386719 483.640625 671.363281 429.871094 C 671.679688 426.519531 674.503906 423.972656 677.859375 423.972656 L 743.421875 423.972656 C 753.898438 423.972656 762.410156 415.457031 762.410156 404.980469 C 762.410156 394.503906 753.898438 385.996094 743.421875 385.996094 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <path
                fill="#a78bfa"
                d="M 398.488281 461.25 C 387.6875 460 377.878906 455.804688 369.773438 449.363281 L 268.730469 550.402344 C 302.953125 582.484375 348.375 602.597656 398.488281 604.222656 L 398.488281 461.25 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <path
                fill="#a78bfa"
                d="M 440.1875 449.367188 C 432.085938 455.804688 422.273438 460 411.488281 461.25 L 411.488281 604.222656 C 461.589844 602.597656 507.007812 582.484375 541.230469 550.410156 L 440.1875 449.367188 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
              <path
                fill="#a78bfa"
                d="M 449.378906 369.785156 C 455.804688 377.878906 460 387.691406 461.238281 398.480469 L 604.234375 398.480469 C 602.617188 348.375 582.503906 302.949219 550.421875 268.730469 L 449.378906 369.785156 "
                fill-opacity="1"
                fill-rule="nonzero"
              />
            </svg>
            {title}
          </div>
          <div
            className=" border-zinc-700 p-2 text-violet-50 bg-zinc-800 border"
            style={{
              marginBottom: 20,
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              fontSize: 70,
              fontStyle: "normal",
              letterSpacing: "-0.025em",
              lineHeight: 1.4,
              whiteSpace: "pre-wrap",
              padding: 8,
              paddingLeft: 26,
              paddingRight: 26,
              gap: 25,
              borderWidth: 1,
              borderRadius: 9999,
              backgroundColor: "#27272a",
              borderColor: "#3f3f46",
            }}
          >
            <span>Use</span>
            <AirtableIcon fill="#a78bfa" />
            <ZapierIcon fill="#a78bfa" />
            <MakeIcon fill="#a78bfa" />
            <span>Efficiently</span>
          </div>
        </div>
      ),
      {
        width: 1200,
        height: 630,
      }
    );
  } catch (e: any) {
    console.log(`${e.message}`);
    return new Response(`Failed to generate the image`, {
      status: 500,
    });
  }
}
